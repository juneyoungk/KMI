<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내시경 검사 배분 계산기 </title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        h1 {
            text-align: center;
            color: #2c7a7b;
            font-size: 2.2em;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        .container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        label {
            width: 220px;
            font-weight: bold;
            color: #4a5568;
            font-size: 1.1em;
        }
        input {
            flex: 1;
            padding: 12px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        input:focus {
            border-color: #319795;
            outline: none;
        }
        button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #319795;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 20px;
        }
        button:hover {
            background-color: #2c7a7b;
            transform: translateY(-2px);
        }
        h2 {
            text-align: center;
            color: #4a5568;
            font-size: 1.5em;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: center;
            font-size: 0.95em;
        }
        th {
            background-color: #e6fffa;
            color: #2f855a;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f7fafc;
        }
        tr:hover {
            background-color: #e6fffa;
            transition: background-color 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>내시경 검사 배분 계산기</h1>
        <div class="input-group">
            <label for="gastroCount">위내시경 갯수:</label>
            <input type="number" id="gastroCount" value="400" min="0">
        </div>
        <div class="input-group">
            <label for="coloCount">대장내시경 갯수:</label>
            <input type="number" id="coloCount" value="120" min="0">
        </div>
        <div class="input-group">
            <label for="gastroDoctors">위내시경 의사 수:</label>
            <input type="number" id="gastroDoctors" value="9" min="1">
        </div>
        <div class="input-group">
            <label for="coloDoctors1F">1층 대장내시경 의사 수:</label>
            <input type="number" id="coloDoctors1F" value="7" min="1">
        </div>
        <div class="input-group">
            <label for="coloDoctors2F">2층 대장내시경 의사 수:</label>
            <input type="number" id="coloDoctors2F" value="3" min="1">
        </div>
        <button onclick="calculateDistribution()">계산하기</button>

        <h2>결과</h2>
        <table id="resultTable">
            <thead>
                <tr>
                    <th>의사 그룹</th>
                    <th>위내시경 갯수</th>
                    <th>대장내시경 갯수</th>
                    <th>총 시행 시간 (분)</th>
                    <th>총 시행 점수</th>
                </tr>
            </thead>
            <tbody id="resultBody"></tbody>
        </table>
<br> Last update 20250908 by JYKIM 
    </div>

    <script>
        // 고정 변수
        const GASTRO_TIME = 7; // 위내시경 1개당 시간 (분)
        const COLO_TIME = 20; // 대장내시경 1개당 시간 (분)
        const GASTRO_SCORE = 1; // 위내시경 1개당 점수
        const COLO_SCORE = 3; // 대장내시경 1개당 점수

        function calculateDistribution() {
            // 입력값 가져오기
            const gastroCount = parseInt(document.getElementById('gastroCount').value) || 0;
            const coloCount = parseInt(document.getElementById('coloCount').value) || 0;
            const gastroDoctors = parseInt(document.getElementById('gastroDoctors').value) || 1;
            const coloDoctors1F = parseInt(document.getElementById('coloDoctors1F').value) || 1;
            const coloDoctors2F = parseInt(document.getElementById('coloDoctors2F').value) || 1;

            // 총 의사 수
            const totalDoctors = gastroDoctors + coloDoctors1F + coloDoctors2F;

            // 총 시행 시간 계산
            const totalTime = (gastroCount * GASTRO_TIME) + (coloCount * COLO_TIME);
            const targetTimePerDoctor = totalTime / totalDoctors;

            // 결과 저장용 배열
            const results = [];

            // 남은 검사 수 초기화
            let remainingGastro = gastroCount;
            let remainingColo = coloCount;

            // 1. 2층 대장내시경 의사 배분: TargetTime에 가까운 대장내시경 배정 (대장내시경만)
            let coloPerDoctor2F = Math.floor(targetTimePerDoctor / COLO_TIME);
            let totalColoFor2F = coloPerDoctor2F * coloDoctors2F;
            if (totalColoFor2F > remainingColo) {
                coloPerDoctor2F = Math.floor(remainingColo / coloDoctors2F);
                totalColoFor2F = coloPerDoctor2F * coloDoctors2F;
            }
            let extraColo2F = remainingColo - totalColoFor2F;
            if (extraColo2F > coloDoctors2F) {
                extraColo2F = coloDoctors2F;
            }
            remainingColo -= totalColoFor2F + extraColo2F;

            for (let i = 0; i < coloDoctors2F; i++) {
                const colo = coloPerDoctor2F + (i < extraColo2F ? 1 : 0);
                const time = colo * COLO_TIME;
                results.push({
                    group: `2층 대장내시경 의사 ${i + 1}`,
                    gastro: 0,
                    colo: colo,
                    time: time,
                    score: colo * COLO_SCORE
                });
            }

            // 2. 1층 대장내시경 의사 배분: 남은 대장내시경 분배 후, TargetTime 부족분만큼 위내시경 배정
            const coloPerDoctor1F = Math.floor(remainingColo / coloDoctors1F);
            let extraColo1F = remainingColo % coloDoctors1F;

            for (let i = 0; i < coloDoctors1F; i++) {
                const colo = coloPerDoctor1F + (i < extraColo1F ? 1 : 0);
                const coloTime = colo * COLO_TIME;
                const remainingTime = Math.max(0, targetTimePerDoctor - coloTime);
                let gastro = Math.floor(remainingTime / GASTRO_TIME);
                // 남은 위내시경이 부족하면 최대한 배정, 음수 방지
                gastro = Math.max(0, Math.min(gastro, remainingGastro));
                const time = coloTime + (gastro * GASTRO_TIME);
                results.push({
                    group: `1층 대장내시경 의사 ${i + 1}`,
                    gastro: gastro,
                    colo: colo,
                    time: time,
                    score: (colo * COLO_SCORE) + (gastro * GASTRO_SCORE)
                });
                remainingGastro = Math.max(0, remainingGastro - gastro);
            }

            // 3. 위내시경 의사 배분: 남은 위내시경을 비슷하게 분배
            const gastroPerDoctor = Math.floor(remainingGastro / gastroDoctors);
            let extraGastro = remainingGastro % gastroDoctors;

            for (let i = 0; i < gastroDoctors; i++) {
                const gastro = Math.max(0, gastroPerDoctor + (i < extraGastro ? 1 : 0));
                const time = gastro * GASTRO_TIME;
                results.push({
                    group: `위내시경 의사 ${i + 1}`,
                    gastro: gastro,
                    colo: 0,
                    time: time,
                    score: gastro * GASTRO_SCORE
                });
            }

            // 결과 출력
            const resultBody = document.getElementById('resultBody');
            resultBody.innerHTML = '';
            results.forEach(result => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${result.group}</td>
                    <td>${result.gastro}</td>
                    <td>${result.colo}</td>
                    <td>${result.time.toFixed(2)}</td>
                    <td>${result.score.toFixed(2)}</td>
                `;
                resultBody.appendChild(row);
            });
        }
    </script>
 </body>
</html>
<!Madeby JYKIM, 20250828>


